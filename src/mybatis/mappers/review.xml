<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  	
<mapper namespace="review">

 	<!-- postContent에서 top3 리뷰 가져오기 -->
 	<select id="getReviewFromContent" parameterType="int" resultType="dto.ReviewDto">
 		select * from
		    (select review_num, member_id, payment_id, title, upload_date, 
		    		replycount, readcount, likecount, content, rownum r
		    from review_gg
		    where payment_id in 
		            (select payment_id
		            from payment_gg
		            where application_id in
		                (select application_id
		                from application_gg
		                where post_id in
		                    (select post_id
		                    from post_gg
		                    where product_id = #{product_id})))
		    order by likecount desc)
		where rownum &lt;=5
 	</select>

</mapper>

