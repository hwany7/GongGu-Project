<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  	
<mapper namespace="member">

	<!-- 멤버 로그인 -->
	<select id="getMemberFromLogin" parameterType="String" resultType="dto.MemberDto">
 		select * from member_gg where member_email=#{member_email} and password=#{password}
 	</select>
 		
	 <!-- 멤버 상태 체크 -->
 	<select id="checkStatus" parameterType="String" resultType="String">
		select member_status from member_gg where member_email=#{member_email}
 	</select>
 	
 	<!-- 내정보 보기를 위한 멤버정보  -->
 	<select id="getMemberFromMypage" parameterType="int" resultType="dto.MemberDto">
 		select * from member_gg where member_id=#{member_id}
 	</select>
 	
 	 <!-- 멤버 상태 변경(휴먼) -->
 	<update id="activateStatusFromLogin" parameterType="int">
 		update member_gg set member_status = 'active' where member_id = #{member_id}
 	</update>
 	
 	<!-- 이메일 중복 검사  -->
	<select id="checkEmail" parameterType="string" resultType="int">
		select count(*) from member_gg where member_email = #{member_email}
	</select>
	
	<!-- 닉네임 중복 검사  -->
	<select id="checkNickname" parameterType="string" resultType="int">
		select count(*) from member_gg where nickname = #{nickname}
	</select>
	
	<!-- 멤버 등록  -->
	<insert id="insertMember" parameterType="dto.MemberDto">
		insert into member_gg(member_email, nickname, password, zipcode, address1, address2, tel, gender, birth_date, visit_path)
		 		values(#{member_email}, #{nickname}, #{password}, #{zipcode}, #{address1}, #{address2}, #{tel}, #{gender, jdbcType=VARCHAR}, #{birth_date, jdbcType=VARCHAR}, #{visit_path, jdbcType=VARCHAR})		
	</insert>

</mapper>

